# OJT 교육 문서: Key-Value 데이터베이스 심화 학습

## **개요**

Key-Value 데이터베이스는 NoSQL 데이터베이스의 가장 단순한 형태로, 데이터를 **키(Key)**와 **값(Value)**의 쌍으로 저장합니다. 이 문서는 Key-Value 데이터베이스의 기본 개념, 특징, 구조, 주요 활용 사례를 다룹니다. MLOps 엔지니어가 실무에서 이를 효과적으로 활용할 수 있도록 작성되었습니다.

---

## **1. Key-Value 데이터베이스란?**

### 정의

- 데이터를 **고유한 키(Key)** 와 해당 키에 매핑된 **값(Value)** 으로 저장하는 데이터베이스입니다.
- 키는 데이터를 식별하는 고유 값이며, 값은 저장하려는 실제 데이터입니다.


### 작동 방식

1. **키(Key)**: 데이터를 식별하기 위한 고유한 문자열 또는 숫자.
2. **값(Value)**: 키에 매핑된 데이터로, 문자열, JSON, 바이너리 등 다양한 형식이 가능.
```plaintext
Key: "User123"
Value: {"Name": "John", "Age": 30, "City": "New York"}
```

---

## **2. Key-Value 데이터베이스의 특징**

### 장점

1. **단순성**:
    - 데이터 모델이 단순하여 사용과 이해가 쉽습니다.
2. **고성능**:
    - 키를 기반으로 데이터를 빠르게 검색할 수 있어 읽기/쓰기 작업이 매우 빠릅니다.
3. **확장성**:
    - 수평적 확장이 용이하여 대규모 데이터를 처리할 수 있습니다.
4. **다양한 데이터 유형 지원**:
    - 값(Value)로 문자열, JSON, 바이너리 등 다양한 형태의 데이터를 저장할 수 있습니다.

### 단점

1. **관계 표현 불가**:
    - 테이블 간 관계를 정의할 수 없어 복잡한 관계형 쿼리에 적합하지 않습니다.
2. **제한된 쿼리 기능**:
    - 키를 기준으로만 데이터를 조회할 수 있으며, 값 내부를 직접 검색하기 어렵습니다.

---

## **3. 주요 Key-Value 데이터베이스**

| 이름              | 특징                             | 활용 사례             |
| :-------------- | :----------------------------- | :---------------- |
| Redis           | 메모리 기반으로 빠른 성능 제공              | 캐싱, 세션 관리, 실시간 분석 |
| Amazon DynamoDB | AWS에서 제공하는 완전 관리형 Key-Value DB | 전자상거래, IoT 데이터 관리 |
| Riak            | 분산 시스템에 최적화                    | 대규모 로그 관리         |

---

## **4. Key-Value 데이터베이스의 구조**

### 데이터 저장 방식

Key-Value DB는 해시 테이블(Hash Table)과 유사하게 작동합니다.

- 키(Key)는 해시 함수(Hash Function)를 통해 특정 위치(버킷)에 매핑됩니다.
- 값(Value)은 해당 위치에 저장됩니다.

```plaintext
Hash Table 구조:
Key: "User123" -> Hash Function -> Bucket[5]
Bucket[5]: {"Name": "John", "Age": 30}
```

---

## **5. 주요 명령어 (Redis 예제)**

### 5.1 기본 명령어

```plaintext
SET <key> <value>    # 키-값 쌍 저장
GET <key>            # 키에 해당하는 값 조회
DEL <key>            # 키 삭제
EXISTS <key>         # 키 존재 여부 확인
```


#### 예제

```plaintext
SET User123 {"Name": "John", "Age": 30}
GET User123          # 결과: {"Name": "John", "Age": 30}
DEL User123          # User123 삭제
EXISTS User123       # 결과: 0 (존재하지 않음)
```


### 5.2 TTL (Time-To-Live)

TTL은 특정 키에 유효 기간을 설정하는 기능입니다.

```plaintext
SET Session123 {"UserID": 456} EX 60  # 60초 후 자동 삭제
TTL Session123                        # 남은 TTL 확인
```

---

## **6. 실무 활용 사례**

### 6.1 캐싱(Caching)

- 자주 조회되는 데이터를 메모리에 저장해 빠르게 접근 가능하도록 합니다.
- 예: 웹 페이지 로딩 속도 개선.

```plaintext
Key: "Product123"
Value: {"Name": "Laptop", "Price": 1200}
```


### 6.2 세션 관리(Session Management)

- 사용자 로그인 세션 정보를 저장하여 인증 속도를 높입니다.
- TTL을 사용해 세션 만료 시간 설정 가능.

```plaintext
Key: "Session456"
Value: {"UserID": 789, "ExpiresIn": 3600}
```


### 6.3 실시간 분석(Real-Time Analytics)

- 실시간 이벤트 데이터를 저장하고 빠르게 처리합니다.
- 예: 클릭 스트림 데이터.

```plaintext
Key: "ClickEvent123"
Value: {"UserID": 101, "Timestamp": "2025-03-14T12:00:00"}
```

---

샤딩 AI 모델에서도 쓰이는 방법



## **7. Key-Value DB 설계 시 고려사항**

1. **키 설계**:
    - 고유성을 보장하며 충돌을 방지해야 합니다(예: 사용자 ID 기반).
2. **값 크기 제한**:
    - 값의 크기가 너무 크면 성능 저하 발생 가능.
3. **TTL 사용**:
    - 불필요한 데이터를 자동으로 삭제해 메모리 효율성을 유지합니다.
4. **수평적 확장**:
    - 분산 환경에서 샤딩(Sharding)을 통해 확장성을 확보합니다. (하나의 큰 것을 쪼개서 여러곳에 분산 배치한 다음 필요할 때 쪼갠 것들을 불러와서 원본의 하나처럼 사용하는 방법)

---

## 결론

Key-Value 데이터베이스는 단순성과 고성능이 요구되는 작업에 최적화된 솔루션입니다. 캐싱, 세션 관리, 실시간 분석 등 다양한 실무 상황에서 활용될 수 있으며, 특히 MLOps 엔지니어가 대규모 데이터를 효율적으로 처리하는 데 매우 유용합니다.

